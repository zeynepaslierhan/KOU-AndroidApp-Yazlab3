<h1 align="center">
  <br>
  <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/logo.png" alt="SoftwareDeveloperArchive" width="100"></a>
  <br>
  Hafıza Oynu
  <br>
</h1>
Bu proje ile Android uygulama ve bulut bilişim teknolojilerinin kullanılması amaçlanmaktadır. Projede belirtilen süre içinde zorluk seviyesine göre kartları doğru eşleştirmek gerekmektedir. 

***Programlama Dili:*** Kotlin

***Geliştme Ortamı *(IDE)*:*** Android Studio

***Bulut Bilişim *(Cloud)*:*** Firebase

## Uygulamanın Arayüzleri

* **Giriş ekranı:** Oyun ilk açıldığında ekranda açılacak sayfa giriş ekranı vardır. Kullanıcı bu ekrandan, kullanıcı adı ve şifresi ile giriş yapabilir, şifre değiştirebilir ve kaydolabilir.

  <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Aray%C3%BCz/Login-Register.png" height="200">

* **Oyun ekranı:** Kullanıcı giriş yaptıktan sonra karşısına gelecek olan ekran, oyun ekranıdır. Burada Tek Oyuncu ve Çoklu Oyuncu Olarak iki farklı seçenek bulunur. Oyun ekranı ilk açıldığında “BAŞLA” butonu bulunur. Oyuncu BAŞLA butonuna tıkladıktan 3 saniye sonra oyun ve süre başlatılır.

  <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Aray%C3%BCz/OyuncuSec.png" align ="left" height="200">

  <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Aray%C3%BCz/ZorlukSec.png" align ="left" height="200">

  <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Aray%C3%BCz/Loading.png" align ="left" height="200">

</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

* **Oyun zorluk seviyesi:** Oyunda 2x2, 4x4 ve 6x6 olmak üzere 3 farklı zorluk seviyesi vardır. Oyun başlatıldığında kartlar kapalı şekilde dağıtılır. Oyundaki kartların her birinden birer çift bulur. Buradaki amaç açılan kartın diğer çiftini bulabilmektir. Oyunda kartların sırası her seferinde rastgeledir.

  | Oyuncu | Basit | Orta | Zor | 
  | :---         |     :---:      |          ---: |         ---: |
  | *Çoklu Oyuncu*   | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Aray%C3%BCz/MultiBasit.png" height="200">   | <img   src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Aray%C3%BCz/MultiOrta.png" height="200">    | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Aray%C3%BCz/MultiZor.png" height="200">    
  | *Tek Kişilik*   |  <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Aray%C3%BCz/TekKisilikBasit.png" height="200">         |  <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Aray%C3%BCz/TekKisilikOrta.png" height="200">       |  <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Aray%C3%BCz/TekKisilikZor.png" height="200">       |

* **Tüm Kartlar:**

  <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/KartArkas%C4%B1.png" align ="left" height="400">

  | Evler | Karakter 1 | Karakter 2 | Karakter 3 | Karakter 4      |
  | :---         |     :---:      |          ---: |          ---: |          ---: |
  | Gryffindor   | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/gryffindor1.png" height="100">    | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/gryffindor2.png" height="100">    | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/gryffindor3.png" height="100">   |<img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/gryffindor4.png" height="100">     |
  | Hufflepuf    |<img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/hufflepuff1.png" height="100">      | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/hufflepuff2.png" height="100">     |<img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/hufflepuff3.png" height="100">      | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/hufflepuff4.png" height="100">     |
  | Ravenclaw    | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/ravenclaw1.png" height="100">       | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/ravenclaw2.png" height="100">      | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/ravenclaw3.png" height="100">       |<img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/ravenclaw4.png" height="100">      |
  | Slytherin    | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/slytherin1.png" height="100">       |  <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/slytherin2.png" height="100">     | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/slytherin3.png" height="100">      | <img src="https://github.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/blob/main/img/Thema/GameCards/slytherin4.png" height="100">      |

### Müzikler

Arka plan müziği: Oyun esnasında arka planda bir müzik çalınır. Bu müzik oyun oynanırken çalmaya devam eder ve 3 durumda bu müzik değişecektir. 

1. Kartın eşi bulunduğunda farklı bir müzik ile uyarı verilir. 
2. Oyun süresi bittiği zaman arka fon müziği olumsuz bir uyarı verilir. 
3. Süre bitmeden bütün kartların eşi bulununca arka fon müziği kazandınız anlamında olumlu bir uyarı verir.



## ArkaYüz

### Firebase

* **Login işlemi**

  ```kotlin

      // global değişken tanımlandı

      private lateinit var auth:FirebaseAuth

      // Aktivite'nin onCreate() fonksiyonu içerisinde auth'a değer atandı

      auth = FirebaseAuth.getInstance()

      fun login(view:View){

          val email = EmailText.text.toString()
          val password = PasswordText.text.toString()

          auth.signInWithEmailAndPassword(email,password).addOnCompleteListener { task->
              if(task.isSuccessful){

                  val user = auth.currentUser?.email.toString()

                  Toast.makeText(this,"Welcome: ${user}",Toast.LENGTH_LONG).show()

                  val intent =Intent(this,FeedActivity::class.java)
                  startActivity(intent)
                  finish()
              }
          }.addOnFailureListener{exception->
              Toast.makeText(applicationContext,exception.localizedMessage,Toast.LENGTH_LONG).show()
          }

      }

  ```

* **Register işlemi:**

  ```kotlin
  fun register(view: View){

          val email = EmailText.text.toString()
          val password = PasswordText.text.toString()

          auth.createUserWithEmailAndPassword(email,password).addOnCompleteListener { task->
              if(task.isSuccessful){
                  val intent = Intent(this,FeedActivity::class.java)
                  startActivity(intent)
                  finish()
              }
          }.addOnFailureListener{exception->
              Toast.makeText(applicationContext,exception.localizedMessage,Toast.LENGTH_LONG).show()
          }

      }
  ```

* **Güncel Kullanıcı Bilgileri:**

  ```kotlin

    val user = auth.currentUser
          if(user!=null){
              val intent =Intent(this,FeedActivity::class.java)
              startActivity(intent)
              finish()
          }
  ```


* **Çıkış:**

  ```kotlin
    auth.signOut()
  ```

### Müzik işlemleri

* **Müziklerin Tanımlanması:**

  ```kotlin
   private var MPbacground: MediaPlayer? = null
    private var MPmatch: MediaPlayer? = null
    private var MPwin: MediaPlayer? = null
    private var MPlost: MediaPlayer? = null

    fun musicSetting(){
        if (MPbacground == null) {
            MPbacground = MediaPlayer.create(this, R.raw.background)
            MPbacground!!.start()
        }
        if (MPmatch == null) {
            MPmatch = MediaPlayer.create(this, R.raw.card_match)
        }
        if (MPwin == null) {
            MPwin = MediaPlayer.create(this, R.raw.win_congrats)
        }
        if (MPlost == null) {
            MPlost = MediaPlayer.create(this, R.raw.time_over)
        }
    }

  ```

* **Müziklerin Başlatılması, Sonlandırılması:**
  
  ```kotlin

    MPbacground?.start()
    MPmatch?.start()
    MPwin?.start()
    MPlost?.start()

          
    MPbacground?.stop()
    MPmatch?.stop()
    MPwin?.stop()
    MPlost?.stop()

  ```

### Sayac

```kotlin
fun timer(){

  object : CountDownTimer(45000,1000) {
    override fun onTick(time: Long) {
    }

    override fun onFinish() {
    }
  }.start()
}

```

### Aktivite

* **Aktiviteler arası geçiş:**

  ```kotlin

    // Main Activitesine yönlendirilir
    val intent = Intent(this,MainActivity::class.java)
    startActivity(intent)
  ```

* **Aktiviteler arası Parametre Aktarımı:**

  ```kotlin

  // Önceki aktivite

  val intent = Intent(this, zorluk_secActivity::class.java)
  intent.putExtra("sample", "single")
  startActivity(intent)

  // Şimdiki aktivite

  val sample = intent.getStringExtra("sample").toString()

  ```



### Oyun Yapısı

```kotlin


  import android.os.Bundle
  import android.widget.ImageView
  import android.widget.Toast
  import androidx.appcompat.app.AppCompatActivity
  import kotlinx.android.synthetic.main.activity_oyun_basit.*

      private lateinit var views: List<ImageView>
      private lateinit var cards: List<MemoryCard>
      private var indexOfSingleSelectedCard: Int? = null

      override fun onCreate(savedInstanceState: Bundle?) {
          super.onCreate(savedInstanceState)
          cards.forEachIndexed { index, card ->

              val view = views[index]
              if (card.isMatched) {
                  view.alpha = 0.3f
              }
              view.setImageResource(if (card.isFaceUp) card.identifier else R.drawable.kart2x2)
          }
      }

      private fun updateModels(position: Int) {
          val card = cards[position]

          // hata kontrolü
          if(card.isFaceUp) {
              Toast.makeText(this, "Geçersiz Hareket!", Toast.LENGTH_SHORT).show();
              return
          }

                      // üç durum olacak
          // öncesinde 0 kart çevrilmiş -> seçilen kartı çevir
          // öncesinde 1 kart çevrilmiş -> seçilen kartı çevir + aynı olup olmamasını kontrol et
          // öncesinde 2 kart çevrilmiş -> seçilmiş kartları ters çevir + seçili kartı çevir.

          if (indexOfSingleSelectedCard == null) {
              // 0 ya da 2 seçili kart varsa
              restoreCards()
              indexOfSingleSelectedCard = position
          } else {
              // 1 kart seçiliyse
              checkForMatch(indexOfSingleSelectedCard!!, position)
              indexOfSingleSelectedCard = null
          }

          card.isFaceUp = !card.isFaceUp
      }

      private fun restoreCards() {
          for (card in cards) {
              if (!card.isMatched) {
                  card.isFaceUp = false
              }
          }
      }

      private fun checkForMatch(position1: Int, position2: Int) {
          if (cards[position1].identifier == cards[position2].identifier) {
              Toast.makeText(this, "Eşleşme Bulundu!", Toast.LENGTH_SHORT).show();
              cards[position1].isMatched = true
              cards[position2].isMatched = true
          }
      }
  }
```

## Projenin APK'sının Oluşturulması
<br>

Proje CTRL + F9 tuş kombinasyonunu kullanarak veya ekranın üst kısmında görünen yeşil çekiç simgesine basılarak build edilir.

Daha sonra üst kısımdaki araç çubuğundan aşağıdaki ekran görüntüsünde gözüktüğü üzere Build Bundle(s) / APK(s) seçeneği üzerine gelinerek Build APK(s) seçeneğine basılır.

<br>
<img src="https://raw.githubusercontent.com/zeynepaslierhan/KOU-AndroidApp-Yazlab3/main/img/build.png" height="300">

<br>

Oluşturulan APK dosyası default olarak \app\build\outputs\apk\debug dizinine kaydedilir.

<br>

## Kaynakça
1. [Kotlin İle Android Mobil Uygulama Geliştirme Eğitimi Temel Seviye , Atıl Samancıoğlu, *BTK Akademi*](https://www.btkakademi.gov.tr/portal/course/kotlin-ile-android-mobil-uygulama-gelistirme-egitimi-temel-seviye-10274)
1. [Kotlin Tutorial](https://www.w3schools.com/KOTLIN/index.php)
1. [Android Tutorial](https://www.tutorialspoint.com/android/index.htm)
1. [Nedir bu Android Service ve Broadcast Receiver](https://medium.com/kodluyoruz/nedir-bu-android-service-ve-broadcast-receiver-291168de075b)
1. [Developer Guides | Android Developers](https://developer.android.com/guide)
1. [Kotlin İle Android Mobil Uygulama Geliştirme İleri Seviye, Atıl Samancıoğlu, *BTK Akademi*](https://www.btkakademi.gov.tr/portal/course/kotlin-ile-android-mobil-uygulama-gelistirme-ileri-seviye-10359)
1. [Firebase Docs](https://firebase.google.com/docs/android/setup#kotlin+ktx_2)
1. [İstenilen aktivitenin çalıştırılması veya ana erkana çağrılması](https://stackoverflow.com/questions/38308161/how-to-run-a-certain-activity-in-android-studio)
1. [How to Support ALL Screen Sizes on Android](https://www.youtube.com/watch?v=5lSQcJjZPFs)
2. [How to Retrieve Image from Firebase in Realtime in Android?](https://www.geeksforgeeks.org/how-to-retrieve-image-from-firebase-in-realtime-in-android/)
3. [Play Audio Song firebase Storage in Android Studio Tutorial](https://www.youtube.com/watch?v=DxZMDSKNG1A)
4. [Build a Tic Tac Toe Game in Android Studio - Online Mode | GeeksforGeeks](https://www.youtube.com/watch?v=-GmU5fSyeV0)



